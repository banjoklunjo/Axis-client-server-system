AXIS_USABLE_LIBS = UCLIBC GLIBC
include $(AXIS_TOP_DIR)/tools/build/rules/common.mak

#IDIR =../include

INCLUDES = -I "/usr/local/openssl/include/"

PROGRAM	= server

#LDIR =../lib
PKGS = gio-2.0 glib-2.0  axhttp
CFLAGS += $(shell PKG_CONFIG_PATH=$(PKG_CONFIG_LIBDIR) pkg-config --cflags $(PKGS))
#LDFLAGS += -lcapture -pthread -lcrypto -lssl
LDLIBS += $(shell PKG_CONFIG_PATH=$(PKG_CONFIG_LIBDIR) pkg-config --libs $(PKGS))
#LDLIBS += -L/usr/local/openssl/lib

CFLAGS+	= -Wall -g -O2 
CFLAGS-y   += -W \
		-Wformat=2 \
	    -Wpointer-arith \
	    -Wbad-function-cast \
	    -Wstrict-prototypes \
	    -Wmissing-prototypes \
	    -Winline \
	    -Wdisabled-optimization \
	    -Wfloat-equal \
	    -Wall \
	    -Werror



all:	$(PROGRAM)

$(PROGRAM): server.c
	$(CC) -o $@ $(CFLAGS) $^ $(LIBS) $(LDFLAGS) $(LDLIBS) ${INCLUDES} -lcrypto


cflags:
	$(info $(CFLAGS))

ldlibs:
	$(info $(LDLIBS))

ldflags:
	$(info $(LDFLAGS))

clean:
	rm -f $(PROGS) *.o core


